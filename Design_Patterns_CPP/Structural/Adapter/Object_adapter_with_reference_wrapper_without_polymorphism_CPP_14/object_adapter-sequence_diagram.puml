@startuml
'https://plantuml.com/sequence-diagram

'autonumber

main -> roundHole : RoundHole(5)

alt fitting roundPeg into roundHole
    main -> roundPeg : RoundPeg(5)
    main -> roundHole : fits(roundPeg)
    roundHole -> roundPeg : getRadius()
    roundHole -> roundHole : _radius
    roundHole --> main : bool [true]
end

alt fitting small squarePeg into roundHole
    main -> squarePegSmall : SquarePeg(5)
    main -> squareToRoundPegAdapter : SquareToRoundPegAdapter(squarePegSmall)
    squareToRoundPegAdapter -> RoundPeg : RoundPeg(0)

    alt updateRadius
        squareToRoundPegAdapter -> squareToRoundPegAdapter : updateRadius()
        squareToRoundPegAdapter -> squarePeg : getSideLength()
        squarePeg --> squareToRoundPegAdapter : radius
        squareToRoundPegAdapter -> RoundPeg : setRadius(radius)
    end

    main -> roundHole : fits(squareToRoundPegAdapter)
    roundHole --> main : bool [true]

end

alt fitting large squarePeg into roundHole
    main -> squarePegLarge : SquarePeg(10)
    main -> squareToRoundPegAdapter : plugToDifferentSquarePeg(squarePegLarge)

    alt updateRadius
        squareToRoundPegAdapter -> squareToRoundPegAdapter : updateRadius()
        squareToRoundPegAdapter -> squarePeg : getSideLength()
        squarePeg --> squareToRoundPegAdapter : radius
        squareToRoundPegAdapter -> RoundPeg : setRadius(radius)
    end

    main -> roundHole : fits(squareToRoundPegAdapter)
    roundHole -> main : bool [false]
end

@enduml
